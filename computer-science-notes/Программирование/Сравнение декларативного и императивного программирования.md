>Imperative programming is **how** you do something, and declarative programming is more like **what** you do.

[[Императивное программирование]] - это описание того, **как** ты делаешь что-то, тогда как [[Декларативное программирование]] больше похоже на описание того, **что** ты делаешь.

#### Первый пример

Вы с подругой приходите в ресторан, чтобы провести приятный вечер. Подходите к стойке регистрации, чтобы занять столик, и говорите...

**Императивный подход (как)**
Я вижу, что тот угловой столик свободен. Мы пойдём туда и сядем там.

**Декларативный подход (что)**
Столик для двоих, пожалуйста.

Императивный подход связан с тем, **как** конкретно вы собираетесь добраться до столика. Для этого вам необходимо перечислить конкретные шаги, которые показали бы, **как** можно было бы достичь цели. Декларативный подход больше касается того, **что** вы хотите получить - столик для двоих.

#### Второй пример

"Я рядом с пятёрочкой. Как мне добраться до твоего дома отсюда?"

**Императивный подход (как)**
Пройди через северный выход парковки и поверни налево. Сядь на автобус 678 и выйди на остановке «Улица Победы». Поверни направо, как если бы ты шёл в Икею. Иди прямо и поверни направо у первого светофора. На следующем светофоре поверни налево. Номер моего дома — 134.

**Декларативный подход (что)**
Мой адрес: Энск, улица Победы, дом 134.

Неважно, как я попаду к твоему дому, важно, на какой машине я приеду. У неё будет или императивная механическая КПП, или декларативная автоматическая КПП. Достаточно метафор?

Прежде чем перейти к примерам кода, важно понять одну важную вещь: многие декларативные подходы имеют своего рода уровень императивной абстракции.

Взглянем ещё раз на наши примеры:
1. Декларативное обращение к сотруднику ресторана подразумевает, что он знает все императивные шаги по предоставлению вам столика.
2. Знание адреса подразумевает, что у вас есть GPS-навигатор, который знает императивные шаги по составлению маршрута.
3. У автомобиля с автоматической КПП есть определённый слой абстракций над передключением передач.

Прежде чем перейти к коду, рассмотрим примеры языков, которые относятся к одному, либо к другому подходу:
- Императивные: [[C]], [[C++]], [[Java]]
- Декларативные: [[HTML]], [[SQL]]
- Смешанные: [[JavaScript]], [[C#]], [[Python]]

Рассмотрим типичный [[SQL]] или [[HTML]] код.

```
SELECT * FROM Users WHERE Country='Mexico';
```

```
<article>
  <header>
    <h1>Declarative Programming</h1>
    <p>Sprinkle Declarative in your verbiage to sound smart</p>
  </header>
</article>
```

Посмотрев на оба эти примера, мы сразу можем понять, что происходит. Они оба декларативные. Они описывают скорее **что** вы хотите получить, а не **как** вы собираетесь это сделать.

В декларативном стиле вы описываете то, чего вы пытаетесь достигнуть, без описания того, как это сделать. Реализация запроса всех пользователей, проживающих в Мексике, была абстрагирована от вас. Вы не беспокоетесь о том, как браузер разберёт ваш элемент `article` и отобразит его на экране.

## Примеры на JavaScript

Перейдём к рассмотрению практических примеров на языке программирования [[JavaScript]]. Далее будут рассмотрены 3 вопроса уровня собеседования на работу.

### Пример 1 (императивный подход)

Напишите функцию, называющуюся `double`, которая принимает массив чисел и возвращает новый массив, каждый элемент которого в два раза больше входного: `double([1,2,3]) -> [2,4,6]`.

```
function double(arr) {
  let results = [];
  for (let i = 0; i < arr.length; i++) {
    results.push(arr[i] * 2);
  }
  return results;
}
```

### Пример 2 (императивный подход)

Напишите функцию `add`, которая принимает массив и возвращает сумму всех его элементов: `add([1,2,3]) -> 6`.

```
function add(arr) {
  let result = 0;
  for (let i = 0; i < arr.length; i++) {
    result += arr[i];
  }
  return result;
}
```

### Пример 3 (императивный подход)

Используя jQuery (или чистый JavaScript), добавьте обработчик события `click` к элементу с `id`, равным `btn`. По нажатию переключите класс `highlight` и смените текст на `Add Highlight` или `Remove Highlight`, в зависимости от текущего состояния элемента.

```
$("#btn").click(function () {
  $(this).toggleClass("highlight");
  $(this).text() === "Add Highlight"
    ? $(this).text("Remove Highlight")
    : $(this).text("Add Highlight");
});
```

Изучив, что общего у этих примеров, мы сможем на самом деле понять, что делает их императивными:

1. Самая очевидная общая черта это то, что все они описывают **как** сделать что-то. В каждом примере мы либо проходимся по массиву, либо явно указываем шаги для реализации заданной функциональности.
2. Это может быть не так очевидно, если вы привыкли мысль декларативно или функционально, но в каждом примере мы мутируем какую-то часть состояния.
3. Субъективно приведённый выше код может показаться не очень читаемым. Просто взглянув на код, я не смогу понять, что в нём происходит. Мой мозг должен пройтись по коду как интерпретатор, при этом принимая во внимание контекст, в котором живёт код (ещё один недостаток изменяемых данных).

Теперь рассмотрим те же самые примеры, написанные в декларативном стиле. Цель - исправить все проблемы, описанные выше. Поэтому каждый пример должен описывать то, **что** происходит, не должен мутировать состояние и должен быть легко читаем.

### Пример 1 (декларативный подход)

Напишите функцию, называющуюся `double`, которая принимает массив чисел и возвращает новый массив, каждый элемент которого в два раза больше входного: `double([1,2,3]) -> [2,4,6]`.

```
function double(arr) {
  return arr.map((item) => item * 2);
}
```

### Пример 2 (декларативный подход)

Напишите функцию `add`, которая принимает массив и возвращает сумму всех его элементов: `add([1,2,3]) -> 6`.

```
function add(arr) {
  return arr.reduce((prev, current) => prev + current, 0);
}
```

### Пример 3 (декларативный подход)

Используя jQuery (или чистый JavaScript), добавьте обработчик события `click` к элементу с `id`, равным `btn`. По нажатию переключите класс `highlight` и смените текст на `Add Highlight` или `Remove Highlight`, в зависимости от текущего состояния элемента.

```
<Btn
  onToggleHighlight={handleToggle}
  highlight={highlight}>
    {buttonText}
</Btn>
```

Обратите внимание, что в первых двух примерах мы используем встроенные в JavaScript методы `map` и `reduce`. Это возвращает нас к тому, что мы видели ранее: многие декларативные решения используют абстракцию над некоторой императивной реализацией.

Во всех примерах мы говорим, **что** хотим получить, а не **как** нам этого достичь (нам неизвестно как "под капотом" работают `map` и `reduce`, нас не должно это волновать). Мы не мутируем состояние. Все мутации скрыты от нас в реализациях методов `map` и `reduce`. Такие примеры легко читаются, если вам известны `map` и `reduce`.

В третьем примере была применена хитрость - был использован [[React]], который исправил все три императивные ошибки. Настоящая красота [[React]] заключается в том, что мы можем создавать желаемый интерфейс в декларативном стиле просто описывая **что** мы хотим видеть в интерфейсе при заданном состоянии.

Интересный замечание. [[Функциональное программирование]] является подмножеством декларативного программирования [1].

## Источники
1. https://ui.dev/imperative-vs-declarative-programming
2. https://tproger.ru/translations/imperative-declarative-programming-concepts/
